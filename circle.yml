## Customize the test machine
machine:
  pre:
    - mkdir ~/.yarn-cache

  timezone:
    America/New_York

  node:
    version:
      4.3.2

## Customize dependencies
dependencies:
  pre:
    - curl -o- -L https://yarnpkg.com/install.sh | bash
    - nvm install 7.0.0
    - sudo curl --output /usr/local/bin/phantomjs https://s3.amazonaws.com/circle-downloads/phantomjs-2.1.1

  cache_directories:
    - ~/.yarn-cache
    - /usr/local/bin
  override:
    - yarn install

## Customize test commands
test:
  override:
    - nvm use 7.0 && yarn test:web -- --maxWorkers=4 && yarn build:web -- --maxWorkers=4:
        parallel: true
    - nvm use 4.3.2 && yarn build && yarn test -- --maxWorkers=4:
        parallel: true
    - nvm use 7.0 && yarn build && yarn test -- --maxWorkers=4:
        parallel: true
